<!DOCTYPE html>
<html>
    <head>
<meta charset="utf-8">
<meta name="viewport" 
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<title>CMS в 8 строк! &ndash; volter9.github.io</title>

<link href="/assets/uploads/likely/likely.css"
      rel="stylesheet"
      type="text/css">
<link href="/assets/css/main.css"
      rel="stylesheet"
      type="text/css">

<link href="/assets/css/theme.css"
      rel="stylesheet"
      type="text/css">

<link rel="alternate" type="application/rss+xml"
      href="/feed.xml" 
      title="RSS Feed"> 
    </head>

    <body>
        <div class="wrapper">
<nav class="fluid navigation">
    <ul class="clearfix links">
     
        <li class="left">
            <a class="" 
               href="/">
                Главная 
            </a>
        </li>
     
        <li class="left">
            <a class="current" 
               href="/blog/">
                Блог 
            </a>
        </li>
     
        <li class="left">
            <a class="" 
               href="/projects/">
                Проекты 
            </a>
        </li>
     
        <li class="left">
            <a class="" 
               href="/links/">
                Ссылки 
            </a>
        </li>
     
    </ul>
</nav> 
<article class="content full full-padding post">
    <h1 class="post-title">
        CMS в 8 строк! 
    </h1>
    
<p>Привет ребята!</p>
<p><strong>UPD</strong>: CMS из этой крутой статьи теперь на <a href="https://github.com/volter9/8-cms">GitHub</a>.</p>
<p>PHP &mdash; это такой мощный язык программирования на котором можно написать какой-угодно
вебсайт, в зависимости от вашего опыта.
Но ты, уважаемый читатель, даже не подозревал что на PHP можно написать
собственную CMS всего лишь в 8 строк! </p>
<p>PHP &mdash; это самый крутой язык программирования на планете.</p>
<!--              этого булшита -->
<p>После прочтение этой научной статьи, ты получишь знание о том как создать свою
крутую CMS в 8 строк!
Ну что же, давай начнем наше путешествие в удивительный мир <!-- психоделического --> PHP!</p>
<h2>CMS</h2>
<!-- Пожалуйста, не воспринимайте этот параграф всерьез, это же шутка :) -->
<p>Наша CMS самая крутая и быстрая CMS на всей планете.
Качество PHP кода нашей CMS круче чем качество кода Линуса Тордавльса!</p>
<p>Давайте начнем с проектирования нашей крутой CMS в 8 строчек.
Нам нужен план. Предлагаю такой план:
<a href="http://macode.ru" target="_blank">просто написать код</a>.
Отличный план.</p>
<p>Я вот написал, а ты следуюешь за мной?</p>
<pre><code class="language-php">&lt;?php  

$route = trim(!empty($_GET['route']) ? $_GET['route'] : 'index', '/');

$file = "content/$route";
$file = file_exists("$file.php") ? "$file.php" : 'content/404.php';

ob_start();
$data = require $file;
$content = ob_get_clean();

extract($data ?: []);

include 'theme/layout.php';</code></pre>
<p>Вот и вся наша CMS. В папке <code>theme</code> должны содержатся шаблоны CMS,
а в папке <code>content</code> должен содержатся контент который должен возвращять массив
с данными.</p>
<h2>Крутой пример сайта</h2>
<p>Вот пример сайта (требует apache):</p>
<div class="tabs-container full">
    <div class="tab">index.php</div>
    <div data-tab="index.php">
<pre class="language-php"><code>&lt;?php

$route = trim(!empty($_GET['route']) ? $_GET['route'] : 'index', '/');

$file = "content/$route";
$file = file_exists("$file.php") ? "$file.php" : 'content/404.php';

ob_start();
$data = require $file;
$content = ob_get_clean();

extract($data ?: []);

include 'theme/layout.php';</code></pre>    </div>

    <div class="tab">.htaccess</div>
    <div data-tab=".htaccess">
<pre class="language-htaccess"><code>AddDefaultCharset UTF-8

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule (.*) index.php?route=$1 [QSA,L]</code></pre>    </div>

    <div class="tab">theme/index.php</div>
    <div data-tab="theme/index.php">
<pre class="language-html"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;?php isset($title) and print($title) ?&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;h1&gt;
            &lt;?php isset($title) and print($title) ?&gt;
        &lt;/h1&gt;

        &lt;?php echo $content ?&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre> 
    </div>

    <div class="tab">content/index.php</div>
    <div data-tab="content/index.php">
<pre class="language-html"><code>&lt;p&gt;
    Добро пожаловать! 
    Мой сайт работает на самой крутой и быстрой CMS в мире, 
    которая написана в 8 строк кода.
&lt;/p&gt;

&lt;?php

return [
    'title' =&gt; 'Добро пожаловать'
];</code></pre>    </div>

    <div class="tab">content/404.php</div>
    <div data-tab="content/404.php">
<pre class="language-html"><code>&lt;p&gt;
    Вы наверное не на ту кнопку нажали. 
    По этому попали сюда. Или же потому что я удалил страницу, но не удалил
    внешнии ссылки.
&lt;/p&gt;

&lt;?php

return [
    'title' =&gt; '404 - Страница не была найдена'
];</code></pre>    </div>
</div>
<p>Вот и вся CMS. В следующей части <!-- которая вряд ли будет опубликована -->,
я <!-- не --> покажу как создать крутой форум для ДотА сервера на основе
этой CMS.</p>
<h2>Купите курс</h2>
<p>Вам понравился эта научная статья, и вы хотите научится писать такой же крутой код
как я?</p>
<!--               пограммированию -->
<p>Ты хочешь научится программировать на PHP, познать самые крутые паттерны и Дзен PHP
и грести деньги лопатой? Не пропусти этот редкий щанс получить золотую жилу
знаний, купите наш курс и ты получишь все богатсво мира!</p>
<!-- Нот реалли -->
<p>
    <a class="buy-button" 
       href="javascript:alert('Хе-хе, шутка')" 
       title="Купишь сейчас, получишь скидку в 50%, лимитед оффер">
        Жми на большую желтую кнопку, купи курс!
    </a>
</p>
<!-- А это правда -->
<p><strong>Забавный факт</strong>: данный блог начинался именно с этих строк.</p>
<p>P.S.: 8 строчек PHP кода. Контент, .htaccess конфиг, и шаблоны не идут в счет строчек.
Только index.php</p>
<style type="text/css">
    /**
     * Говно код, говнокод, 
     * единственный в мире CSS говнокод
     */
    .buy-button {
        background-color: hsl(40, 95%, 66%); 
        border: 0px !important; 
        border-radius: 8px;
        color: #000; 
        font-size: 24px; 
        font-weight: bold; 
        line-height: 140%;

        display: inline-block; 
        margin-left: -8px;
        padding: 0.85em 2em; 
    }

    .buy-button:hover {
        background-color: hsl(40, 100%, 72%); 
    }
</style> 

    <div class="fluid">

<div class="likely likely-medium" data-title="CMS в 8 строк!">
    <div class="twitter" data-via="volter_9">Твитнуть</div>
    <div class="vkontakte">Поделиться</div>
    <div class="facebook">Поделиться</div>
</div> 

        <ul class="post-details">
            <li class="post-date">
                Октябрь 9, 2015 
            </li>
             
            <li>
                <span class="post-category post-php-category">
                    PHP 
                </span>
            </li>
             
            <li>
                 
                <span class="post-tag">прикол</span>
                 
                <span class="post-tag">flat file CMS</span>
                 
            </li>
             
        </ul>
    </div>
    
<div class="post-comments">
    <h2>Комментарии</h2>

    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function () {
            this.page.url = 'http://volter9.github.io/blog/8-loc-cms/';
            this.page.identifier = '8-loc-cms';
        };
    
        (function() {
            // Stylish...
            var d = document, 
                s = d.createElement('script');
    
            s.src = '//volter9-github-io.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
        
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>
        Please enable JavaScript to view the 
        <a href="https://disqus.com/?ref_noscript" rel="nofollow">
            comments powered by Disqus.
        </a>
    </noscript>
</div>
 
</article> 

<footer class="footer">
    <div class="fluid">
        <ul class="footer-menu clearfix">
            <li>
                &copy; 2015
            </li>
            <li>
                <a href="http://twitter.com/volter_9"
                   target="_blank">Twitter</a>
            </li> 
            <li>
                <a href="http://github.com/volter9"
                   target="_blank">Github</a>
            </li>
        </ul>
    </div>
</footer>

<script src="/assets/js/hljs.js" 
        type="text/javascript"></script>

<script src="/assets/uploads/likely/likely.js"
        type="text/javascript"></script>
<script src="/assets/js/spoiler.js"
        type="text/javascript"></script>
<script type="text/javascript">
    typeof hljs !== 'undefined' && hljs.initHighlightingOnLoad();
</script> 
 
<!-- Yandex.Metrika counter -->
<script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter32699335 = new Ya.Metrika({ id:32699335, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script>
<noscript><img src="https://mc.yandex.ru/watch/32699335" style="position:absolute; left:-9999px;" alt=""></noscript>
<!-- /Yandex.Metrika counter -->
         </div>
    </body>
</html>